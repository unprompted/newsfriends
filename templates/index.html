<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:py="http://genshi.edgewall.org/">
	<?python from genshi.core import Markup ?>
	<head>
		<title>Template!</title>
		<link type="text/css" rel="stylesheet" href="${environment.SCRIPT_NAME}/static/openid-selector/css/openid.css" />
		<script type="text/javascript" src="${environment.SCRIPT_NAME}/static/openid-selector/js/jquery-1.2.6.min.js"></script>
		<script type="text/javascript" src="${environment.SCRIPT_NAME}/static/openid-selector/js/openid-jquery.js"></script>
		<script type="text/javascript" src="${environment.SCRIPT_NAME}/static/openid-selector/js/openid-en.js"></script>
		<script type="text/javascript">
			$(document).ready(function() {
				openid.img_path = "${environment.SCRIPT_NAME}/static/openid-selector/images/";
				openid.init('openid_identifier');
			});
		</script>
	</head>
	<body>
		<h1>Template!</h1>
		<div style="background: #f88; border: 4px solid #f00; padding: 1em" py:if="defined('error')"><pre>${error}</pre></div>
		<div py:if="not 'oid' in session">
			<h2>Log in</h2>
			<!-- Simple OpenID Selector -->
			<form action="${environment.SCRIPT_NAME}/verify" method="POST" id="openid_form">
				<input type="hidden" name="action" value="verify" />
				<fieldset>
					<legend>Sign-in or Create New Account</legend>
					<div id="openid_choice">
						<p>Please click your account provider:</p>
						<div id="openid_btns"></div>
					</div>
					<div id="openid_input_area">
						<input id="openid_identifier" name="openid_identifier" type="text" value="http://" />
						<input id="openid_submit" type="submit" value="Sign-In"/>
					</div>
					<noscript>
						<p>OpenID is service that allows you to log-on to many different websites using a single indentity.
						Find out <a href="http://openid.net/what/">more about OpenID</a> and <a href="http://openid.net/get/">how to get an OpenID enabled account</a>.</p>
					</noscript>
				</fieldset>
			</form>
			<!-- /Simple OpenID Selector -->
		</div>
		<div py:if="'oid' in session">
			<h2>Welcome, ${session.oid}</h2>
			<a href="${environment.SCRIPT_NAME}/logout">Log out</a>
		</div>
		<div py:if="defined('response')">
			<h2>Response</h2>
			<pre>${response}</pre>
		</div>
		<h2 py:if="session">Session</h2>
		<ul>
			<li py:for="k, v in session.items()"><b>${k}</b>: ${v}</li>
		</ul>
		<div py:if="defined('environment')">
			<h2>Environment</h2>
			<ul>
				<li py:for="k, v in environment.items()"><b>${k}</b>: ${v}</li>
			</ul>
		</div>
	</body>
</html>
